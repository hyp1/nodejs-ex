<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1" />
    <title>AWRI - Rechtsfrage Service</title>
    <script src="//cdn.jsdelivr.net/bluebird/3.5.0/bluebird.js"></script>
    <script src="/es5/awriconnect-es5.js"></script>

    <style>
        input#cmdline , ul#terminal
            {
            width: 100%;
        }
    </style>
</head>
<body onload="">
    <h3>AWRI Connect</h3>
    <input type="text" id="ac0-host" value="http://localhost/stage.awri.ch">
    <input type="text" id="ac0-endpoint" value="connect">
    <input type="button" id="ac0-exec" onclick="execac0();" value="new AWRI(host,endpoint);">
    <hr>
        <input type="button" id="ac1-exec" onclick="execac1();" value="awri.token()">
    <hr>
    <input type="button" id="ac2-exec" onclick="execac2();" value="awri.connect()">
    <hr>
        <input type="text" id="ac3-username" value="root">
        <input type="text" id="ac3-password" value="kimo2002">
        <input type="button" id="ac3-exec" onclick="execac3();" value="awri.login()">
        <hr>
        <input type="text" id="ac3a-username" value="">
        <input type="text" id="ac3a-password" value="">
        <input type="text" id="ac3a-mail" value="">
        <input type="text" id="ac3a-mail-conf" value="">
          <input type="button" id="ac3a-exec" onclick="execac3a();" value="awri.register()">

    <hr>
        <input type="button" id="ac4-exec" onclick="execac4();" value="awri.logount()">
        <hr>
        <input type="text" id="ac5-txt" value="">
        <input type="button" id="ac5exec" onclick="execac5();" value="awriconnect_search_node()">
        <hr>
        <input type="text" id="ac6-txt" value="">
        <input type="button" id="ac6exec" onclick="execac6();" value="awriconnect_search_user()">
 
        <hr>
        <input type="text" id="ac7-txt" value="">
        <input type="button" id="ac7exec" onclick="execac7();" value="awriconnect_dummy()">
        <hr>
        <h3>awri_fragen Modul</h3>
        <input type="text" id="ac8-txt" value="18305">
        <input type="button" id="ac8exec" onclick="execac8();" value="awriconnect_frage_get()">
        <input type="button" id="ac8aexec" onclick="execac8a();" value="awriconnect_is_bookmark()">
        <hr>
        page:<input type="text" id="ac9-page" value="100"> fields:<input type="text" id="ac9-fields" value="nid,title"> parameters:<input type="text" id="ac9-parameters" value="parameters[status]=1&parameters[type]=rechtsfrage">
        page_size:<input type="text" id="ac9-page_size" value="1"> options :<input type="text" id="ac9-options" value="options[orderby][created]=desc">
        <input type="button" id="ac9exec" onclick="execac9();" value="awriconnect_fragen_index()">
        <hr>
        <input type="text"  id="ac10-nid" value="18309"> <textarea id="ac10-data">{"body": "Hallo von Update :-)","anonym": "0","fbid": "100000611529195","fbname": "Robert Schweng"}</textarea>
        <input type="button" id="ac10exec" onclick="execac10();" value="awriconnect_frage_update()">
        <hr><!-- 
{"body": "Hallo Neu Jetzt??","anonym": "1","fbid": "100000611529195","fbname": "Robert Schweng","field_image":{"und":[{"0":{"fid":224}},{"0":{"fid":736}}]}}

"field_image": {"und":{ 
             "0": {"fid": "244"} ,
             "1": {"fid": "724" }
             } },    
        
             {"body": "Hallo Neu","anonym": "1","fbid": "100000611529195","fbname": "Robert Schweng","field_image":{"und":[{"0":{"fid":726}},{"1":{"fid":224}}]}}

            -->
         <textarea id="ac11-data">
                {
                    "body": "TEST",
                    "anonym":"1",
                    "field_kanton":"66",
                    "fbid": "100000611529195",  
                    "field_image":{"und":{
                            "0":{"fid": "244"},
                            "1":{"fid": "724"} 
                            } }
                }          
           </textarea>
        <input type="button" id="ac11exec" onclick="execac11();" value="awriconnect_frage_create()">
        <hr>
        <h3>Taxonomy Modul</h3>
        Taxonomy
        <input type="text"  id="ac12-vid" value="3"><input type="text"  id="ac12-fields" value="vid,name,description">
        <input type="button" id="ac12exec" onclick="execac12();" value="awriconnect_taxonomy_vocabulary()">
        <hr>Taxonomy Term
        page:<input type="text" id="ac13-page" value="0"> fields:<input type="text" id="ac13-fields" value="vid,name"> parameters:<input type="text" id="ac13-parameters" value="&parameters[vid]=3">
        page_size:<input type="text" id="ac13-page_size" value="27"> options :<input type="text" id="ac13-options" value="options[orderby][name]=asc">
        <input type="button" id="ac13exec" onclick="execac13();" value="awriconnect_taxomomy_term()">
        <hr>
        <h3>File</h3>
        <input type="file" id="ac14-file" onchange="awri._previewFile(this,'img#ac14-preview')"> 
        <img src="" id="ac14-preview" height="200" alt="Image preview...">
        <input type="button" onclick="execac14();" value="awriconnect_file_upload()">
        <hr>
        <input type="text"  id="ac15-view" value="drupalgap/views_datasource/drupalgap_content"><input type="text"  id="ac15-params" value="page=0">
        <input type="button" id="ac15exec" onclick="execac15();" value="awriconnect_view_get_viewy()">
        <hr>
        <input type="button" id="ac16exec" onclick="execac16();" value="awriconnect_whos_online()">
        <hr>
        <input type="button"  onclick="document.getElementById('log').innerHTML='';" value="CLEARLOG">
        <input type="button"  onclick="check();" value="Connected?">
        <ul id="log">log:</ul>

<script>

//{"vid":"18338","uid":"3","title":"Hallo Neu","log":"","status":"1","comment":"2","promote":"0","sticky":"0","nid":"18350","type":"rechtsfrage","language":"und","created":"1535724643","changed":"1535725469","tnid":"0","translate":"0","revision_timestamp":"1535725469","revision_uid":"3","body":{"und":[{"value":"Hallo Neu","summary":"","format":"filtered_html","safe_value":"<p>Hallo Neu</p>\n","safe_summary":""}]},"field_anonym":{"und":[{"value":"1"}]},"field_fbname":{"und":[{"value":"Robert Schweng","format":null,"safe_value":"Robert Schweng"}]},"field_fbmid":[],"field_fbid":{"und":[{"value":"100000611529195","format":null,"safe_value":"100000611529195"}]},"field_rechtsgebiete":{"und":[{"tid":"9"}]},"field_bewertung":[],"field_image":{"und":[{"fid":"734","uid":"3","filename":"ball_100.png","uri":"public://attachments/ball_100_19.png","filemime":"image/png","filesize":"6967","status":"1","timestamp":"1535724671","type":"image","field_file_image_alt_text":[],"field_file_image_title_text":[],"rdf_mapping":[],"metadata":{"height":100,"width":100},"height":"100","width":"100","alt":"","title":""}]},"field_kanton":{"und":[{"tid":"66"}]},"metatags":{"und":{"robots":{"value":{"index":0,"follow":0,"noindex":0,"nofollow":0,"noarchive":0,"nosnippet":0,"noodp":0,"noydir":0,"noimageindex":0,"notranslate":0}}}},"rdf_mapping":{"rdftype":["sioc:Item","foaf:Document"],"title":{"predicates":["dc:title"]},"created":{"predicates":["dc:date","dc:created"],"datatype":"xsd:dateTime","callback":"date_iso8601"},"changed":{"predicates":["dc:modified"],"datatype":"xsd:dateTime","callback":"date_iso8601"},"body":{"predicates":["content:encoded"]},"uid":{"predicates":["sioc:has_creator"],"type":"rel"},"name":{"predicates":["foaf:name"]},"comment_count":{"predicates":["sioc:num_replies"],"datatype":"xsd:integer"},"last_activity":{"predicates":["sioc:last_activity_date"],"datatype":"xsd:dateTime","callback":"date_iso8601"}},"path":{"pathauto":"1"},"translations":{"original":"und","data":{"und":{"entity_type":"node","entity_id":"18350","revision_id":"18338","language":"und","source":"","uid":"3","status":"1","translate":"0","created":"1535724643","changed":"1535724671"}}},"cid":"0","last_comment_timestamp":"1535724643","last_comment_name":null,"last_comment_uid":"3","comment_count":"0","name":"Robert Schweng","picture":"1","data":"a:1:{s:7:\"contact\";i:0;}"}


var user; 
function check(){
    alert(awri.connected);
    console.log(awri);
}

document.addEventListener('DOMContentLoaded', function() {
});

awri=new AWRI(document.getElementById('ac0-host').value,document.getElementById('ac0-endpoint').value);
 
(function(){
 
   
  print('anon()');
 
  console.log("token")

  var t=awri.token();
  console.log("token done"+t)

 console.log("connect")

  awri.connect();
  console.log("connect done")
/*
  console.log("awriconnect_logout")

awri.awriconnect_logout();
console.log("awriconnect_logout done")
*/




})();

function print(line){
    var log=document.getElementById('log');
    var li=document.createElement('li');
    var txt=document.createTextNode(line);
    li.appendChild(txt);
    log.appendChild(li);
}
    
function execac0(){
awri=new AWRI(document.getElementById('ac0-host').value,document.getElementById('ac0-endpoint').value);
}

function execac1(){
//alert(awri.connected;
awri.token();
}

function execac2(){
awri.connect();
}

function execac3(){
awri.awriconnect_login(document.getElementById('ac3-username').value ,document.getElementById('ac3-password').value);
}

function execac4(){
awri.awriconnect_logout();
}

function execac5(){
awri.awriconnect_search_node(document.getElementById('ac5-txt').value);
}

function execac6(){
awri.awriconnect_search_user(document.getElementById('ac6-txt').value);
}

function execac7(){
awri.awriconnect_dummy(document.getElementById('ac7-txt').value);
}

function execac8(){
awri.awriconnect_frage_get(document.getElementById('ac8-txt').value);
}
function execac8a(){
awri.awriconnect_is_bookmark('bookmarks',document.getElementById('ac8-txt').value);
}


function execac9(){
awri.awriconnect_fragen_index(document.getElementById('ac9-page').value,document.getElementById('ac9-fields').value,document.getElementById('ac9-parameters').value,document.getElementById('ac9-page_size').value,document.getElementById('ac9-options').value);
}

function execac10(){
awri.awriconnect_frage_update(document.getElementById('ac10-nid').value,document.getElementById('ac10-data').value);
}

function execac11(){
awri.awriconnect_frage_create(document.getElementById('ac11-data').value);
}

function execac12(){
awri.awriconnect_taxonomy_vocabulary(document.getElementById('ac12-vid').value,document.getElementById('ac12-fields').value);
}

function execac13(){
awri.awriconnect_taxonomy_term(document.getElementById('ac13-page').value,document.getElementById('ac13-fields').value,document.getElementById('ac13-parameters').value,document.getElementById('ac13-page_size').value,document.getElementById('ac13-options').value);
}

function execac14(){
awri.awriconnect_upload_file('ac14-preview');
}

function execac3a(){
awri.awriconnect_register(document.getElementById('ac3a-username').value,document.getElementById('ac3a-password').value,document.getElementById('ac3a-mail').value,document.getElementById('ac3a-mail-conf').value);
}

function execac15(){
awri.awriconnect_views_get_view(document.getElementById('ac15-view').value,document.getElementById('ac15-params').value);
}

function execac16(){
awri.awriconnect_whos_online();
}



function exec1(){
chat=new ChatClient(document.getElementById('1-protocol').value,document.getElementById('1-host').value,document.getElementById('1-port').value);
alert(user.uid);
chat.connect(user);
}

function awriconnect_user_connected(user){
print('awriconnect_user_connected'+user.uid);
//alert('awriconnect_user_connected:'+user.uid);
//chat.connect(user);
};
function awriconnect_error(name,err){
print(name+' :'+err);
};

function awriconnect_token(token){
//alert('awriconnect_token:'+token);
print('awriconnect_token: '+token);
};


function awriconnect_data(name,data){
//alert('awriconnect_token:'+data);
print(name+': '+JSON.stringify(data));
};


function awriconnect_upload(name,data){
//alert('awriconnect_token:'+data);
print(name+': '+JSON.stringify(data));
};



    </script>

</body>

</html>

 